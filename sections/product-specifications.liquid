{{ 'section-product-specifications.css' | asset_url | stylesheet_tag }}

<script src='{{ 'product-specifications.js' | asset_url }}' defer='defer'></script>

{%- style -%}
	{% render 'section-margin' %}
{%- endstyle -%}

<div class='product-specifications section-{{ section.id }}-padding' id="product-specifications">
	<div class='container'>
		<div class='product-specifications__wrapper'>
			{% render 'section-header',
				section_heading: section.settings.section_heading,
				section_subheading: section.settings.section_subheading,
				dot: section.settings.dot,
				section_heading_size: section.settings.section_heading_size,
				section_heading_tag: section.settings.section_heading_tag,
			%}

			<div class='product-specifications-main-container'>
				<div class='product-specifications__content'>
					<div class='product-specifications__items'>
            {% if product.metafields.custom.specifications != blank %}
              {% for item in product.metafields.custom.specifications.value %}
                <div
                  class='product-specifications__item{% if block.settings.default_open %} active{% endif %}'
                  {{ block.shopify_attributes }}
                >
                  <button
                    class='product-specifications__toggle focus-inset button--unstyled'
                    aria-label='{{ block.settings.question | escape }}'
                  >
                    <div class='product-specifications__toggle-group'>
											<div class="product-specifications__number">{{ forloop.index }}</div>
                      {%- if item.name != blank -%}
                        <h3 class='product-specifications__question'>
                          {{ item.name }}
                        </h3>
                      {%- endif -%}
                    </div>
                    <div class='product-specifications__icon icon-style--{{ section.settings.icon_style }}'>
                      {% render 'icon-minus' %}
                      {% render 'icon-plus' %}
                    </div>
                  </button>

                  {%- if item.description != blank or item.characteristics_name != blank or item.characteristics_value != blank or item.image != blank -%}
                    <div
                      class='product-specifications__answer {% if item.image == blank %} product-specifications__answer_no-image {% endif %}'
                      {% if block.settings.default_open %}
                        style='display: block;'
                      {% endif %}
                    >
											{%- if item.description != blank -%}
												<div class='product-specifications__answer-desc'>
													{{ item.description | newline_to_br }}
												</div>
											{% endif %}

                      {% if item.characteristics_name != blank or item.characteristics_value != blank or item.image != blank %}
												<div class="product-specifications__box">
													{% if item.characteristics_name != blank or item.characteristics_value != blank %}
														<div class="product-specifications__characteristics-wrapper">
															{% for name in item.characteristics_name.value %}
																<div class="product-specifications__characteristics">
																	<div class="product-specifications__characteristics-name">
																		{{ name }}
																	</div>
																	<div class="product-specifications__characteristics-value">
																		{{ item.characteristics_value.value[forloop.index0] }}
																	</div>
																</div>
															{% endfor %}
														</div>
													{% endif %}

													{% if item.image != blank %}
														<div class='product-specifications__answer-image'>
															{{
																item.image
																| image_url: width: item.image.width
																| image_tag:
																	loading: 'lazy',
																	width: 256,
																	widths: '246, 493, 600, 713, 823, 990, 1100, 1296, 1600, 1800'
															}}
														</div>
													{% endif %}
												</div>
											{% endif %}
                    </div>
                  {%- endif -%}
                </div>
              {% endfor %}
            {% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% schema %}
{
	"name": "t:sections.product-specifications.name",
	"tag": "section",
	"class": "product-specifications-section",
	"enabled_on": {
		"templates": ["product"]
	},
	"settings": [
		{
			"type": "paragraph",
			"content": "t:sections.product-specifications.settings.paragraph.content"
		},
		{
			"type": "select",
			"id": "icon_style",
			"options": [
				{
					"value": "primary",
					"label": "t:sections.all.icon_styles.options__1.label"
				},
				{
					"value": "secondary",
					"label": "t:sections.all.icon_styles.options__2.label"
				},
				{
					"value": "tertiary",
					"label": "t:sections.all.icon_styles.options__3.label"
				}
			],
			"default": "secondary",
			"label": "t:sections.all.icon_styles.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.heading.header.content"
		},
		{
			"type": "text",
			"id": "section_heading",
			"default": "t:sections.product-specifications.settings.heading.default",
			"label": "t:sections.all.heading.label"
		},
		{
			"type": "select",
			"id": "section_heading_tag",
			"label": "t:sections.all.heading.tag",
			"options": [
				{
					"value": "h1",
					"label": "H1"
				},
				{
					"value": "h2",
					"label": "H2"
				},
				{
					"value": "h3",
					"label": "H3"
				},
				{
					"value": "h4",
					"label": "H4"
				},
				{
					"value": "h5",
					"label": "H5"
				},
				{
					"value": "h6",
					"label": "H6"
				},
				{
					"value": "div",
					"label": "div"
				},
				{
					"value": "p",
					"label": "p"
				},
				{
					"value": "span",
					"label": "span"
				}
			],
			"default": "h2"
		},
		{
			"type": "select",
			"id": "section_heading_size",
			"options": [
				{
					"value": "h4",
					"label": "t:sections.all.heading_size.options__4.label"
				},
				{
					"value": "h3",
					"label": "t:sections.all.heading_size.options__1.label"
				},
				{
					"value": "h2",
					"label": "t:sections.all.heading_size.options__2.label"
				},
				{
					"value": "h1",
					"label": "t:sections.all.heading_size.options__3.label"
				}
			],
			"default": "h2",
			"label": "t:sections.all.heading_size.label"
		},
		{
			"type": "text",
			"id": "section_subheading",
      "default": "t:sections.product-specifications.settings.subheading.label",
			"label": "t:sections.all.section-header.subheading.label"
		},
		{
			"type": "checkbox",
			"id": "dot",
			"default": true,
			"label": "t:sections.all.section-header.dot.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.section-margin.header.content"
		},
		{
			"type": "select",
			"id": "margin_top",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "s",
			"label": "t:sections.all.section-margin.margin_top.label"
		},
		{
			"type": "select",
			"id": "margin_bottom",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "s",
			"label": "t:sections.all.section-margin.margin_bottom.label"
		}
	],
	"presets": [
		{
			"name": "t:sections.product-specifications.name"
		}
	]
}
{% endschema %}
