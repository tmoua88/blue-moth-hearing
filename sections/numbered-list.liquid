{{ 'section-numbered-items.css' | asset_url | stylesheet_tag }}
<script src='{{ 'numbered-items.js' | asset_url }}' defer='defer'></script>

{% style %}
	{% render 'section-margin' %}
{% endstyle %}

{% liquid
	assign swipe_on_mobile = section.settings.swipe_on_mobile
	assign columns_per_row = section.settings.columns_per_row
%}

<div class='numbered-items-section'>
	<div class='container'>
		<div class='numbered-items__wrapper'>
			<div class='{% if swipe_on_mobile and section.blocks.size > 1 %}swiper-header{% endif %}'>
				{%
					render 'section-header',
					section_heading: section.settings.section_heading,
					section_subheading: section.settings.subheading,
					section_heading_size: section.settings.section_heading_size,
					section_heading_tag: section.settings.section_heading_tag,
					dot: section.settings.dot,
				%}
			</div>
			<div class='numbered-items-list {% if swipe_on_mobile and section.blocks.size > 1 %}swiper swiper--numbered-items{% endif %}'>
				{%- if swipe_on_mobile and section.blocks.size > 1 -%}
					<div class='swipe-on-mobile__nav no-js-hidden'>
						<div class='numbered-items__pagination swiper-pagination'></div>
					</div>
				{%- endif -%}
				<div class='numbered-items-list__wrapper numbered-items-list__wrapper--{{ columns_per_row }} numbered-items-list__wrapper {% if swipe_on_mobile and section.blocks.size > 1 %}swiper-wrapper{% endif %}'>
					{%- for block in section.blocks -%}
						<div
							class='numbered-items-card numbered-items-list__item numbered-items-card {% if swipe_on_mobile and section.blocks.size > 1 %}swiper-slide{% endif %}'
							{{ block.shopify_attributes }}
						>
							<div class='numbered-items-card__number'>
								{{ forloop.index }}
							</div>
							{% if block.settings.heading != blank
								or block.settings.text != blank
							%}
								<div class='numbered-items-card__main'>
									{%- if block.settings.heading != blank -%}
										<h4 class='numbered-items-card__heading {{ section.settings.card_heading_size }}'>
											{{ block.settings.heading | escape }}
										</h4>
									{%- endif -%}
									{%- if block.settings.text != blank -%}
										<p class='numbered-items-card__text richtext__content h3'>
											{{ block.settings.text }}
										</p>
									{%- endif -%}
								</div>
							{% endif %}
						</div>
					{%- endfor -%}
				</div>
			</div>
		</div>
	</div>
</div>

{% schema %}
{
	"name": "t:sections.numbered_items_list.name",
	"class": "spaced-section numbered-items-section",
	"tag": "section",
	"max_blocks": 12,
	"enabled_on": {
		"templates": ["*"]
	},
	"settings": [
		{
			"type": "header",
			"content": "t:sections.all.section-header.label"
		},
		{
			"type": "text",
			"id": "section_heading",
			"default": "t:sections.numbered_items_list.settings.section_heading.default",
			"label": "t:sections.all.section-header.heading.label"
		},
		{
			"type": "select",
			"id": "section_heading_tag",
			"label": "t:sections.all.heading.tag",
			"options": [
				{
					"value": "h1",
					"label": "H1"
				},
				{
					"value": "h2",
					"label": "H2"
				},
				{
					"value": "h3",
					"label": "H3"
				},
				{
					"value": "h4",
					"label": "H4"
				},
				{
					"value": "h5",
					"label": "H5"
				},
				{
					"value": "h6",
					"label": "H6"
				},
				{
					"value": "div",
					"label": "div"
				},
				{
					"value": "p",
					"label": "p"
				},
				{
					"value": "span",
					"label": "span"
				}
			],
			"default": "h2"
		},
		{
			"type": "select",
			"id": "section_heading_size",
			"options": [
				{
					"value": "h4",
					"label": "t:sections.all.heading_size.options__4.label"
				},
				{
					"value": "h3",
					"label": "t:sections.all.heading_size.options__1.label"
				},
				{
					"value": "h2",
					"label": "t:sections.all.heading_size.options__2.label"
				},
				{
					"value": "h1",
					"label": "t:sections.all.heading_size.options__3.label"
				}
			],
			"default": "h2",
			"label": "t:sections.all.heading_size.label"
		},
		{
			"type": "text",
			"id": "subheading",
			"default": "t:sections.numbered_items_list.settings.subheading.default",
			"label": "t:sections.all.section-header.subheading.label"
		},
		{
			"type": "checkbox",
			"id": "dot",
			"default": true,
			"label": "t:sections.all.section-header.dot.label"
		},
		{
			"type": "header",
			"content": "t:sections.numbered_items_list.settings.section_heading.label"
		},
		{
			"type": "range",
			"id": "columns_per_row",
			"min": 1,
			"max": 3,
			"step": 1,
			"default": 2,
			"label": "t:sections.all.columns.label",
			"info": "t:sections.all.columns.info"
		},
		{
			"type": "header",
			"content": "t:sections.all.mobile_options.header.content"
		},
		{
			"type": "checkbox",
			"id": "swipe_on_mobile",
			"default": false,
			"label": "t:sections.all.mobile_options.swipe.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.heading.header.content"
		},
		{
			"type": "select",
			"id": "card_heading_size",
			"options": [
				{
					"value": "h3",
					"label": "t:sections.all.heading_size.options__1.label"
				},
				{
					"value": "h2",
					"label": "t:sections.all.heading_size.options__2.label"
				}
			],
			"default": "h3",
			"label": "t:sections.numbered_items_list.settings.card_heading_size.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.section-margin.header.content"
		},
		{
			"type": "select",
			"id": "margin_top",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "m",
			"label": "t:sections.all.section-margin.margin_top.label"
		},
		{
			"type": "select",
			"id": "margin_bottom",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "m",
			"label": "t:sections.all.section-margin.margin_bottom.label"
		}
	],
	"blocks": [
		{
			"type": "numbered_item",
			"name": "t:sections.numbered_items_list.blocks.numbered_item.name",
			"settings": [
				{
					"type": "text",
					"id": "heading",
					"default": "t:sections.numbered_items_list.blocks.numbered_item.settings.heading.default",
					"label": "t:sections.numbered_items_list.blocks.numbered_item.settings.heading.label"
				},
				{
					"type": "textarea",
					"id": "text",
					"default": "t:sections.numbered_items_list.blocks.numbered_item.settings.text.default",
					"label": "t:sections.numbered_items_list.blocks.numbered_item.settings.text.label"
				}
			]
		}
	],
	"presets": [
		{
			"name": "Numbered items list",
			"blocks": [
				{
					"type": "numbered_item"
				},
				{
					"type": "numbered_item"
				},
				{
					"type": "numbered_item"
				},
				{
					"type": "numbered_item"
				}
			]
		}
	]
}
{% endschema %}
