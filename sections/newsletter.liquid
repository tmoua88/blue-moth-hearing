{{ 'section-newsletter.css' | asset_url | stylesheet_tag }}

{%- style -%}
	{% render 'section-margin' %}
	{% render 'section-padding' %}
{%- endstyle -%}

{% liquid
	assign v_align = section.settings.v_align
%}

<div
	class="newsletter color-{{ section.settings.color_scheme }}"
>
	<div class="container section-{{ section.id }}-padding">
		<div class="newsletter__wrapper {{ v_align }}">
			{% if section.settings.heading != blank
				or section.settings.newsletter_text != blank
			%}
				<div class="newsletter-heading-text-wrapper">
					{%- if section.settings.heading != blank -%}
						{% assign heading_tag = section.settings.section_heading_tag %}
						<{{ heading_tag }} class="newsletter__title {{ section.settings.heading_size }}">
							{{ section.settings.heading }}
						</{{ heading_tag }}>
					{%- endif -%}

					{%- if section.settings.newsletter_text != blank -%}
						<div class="newsletter-form__text">
							{{ section.settings.newsletter_text }}
						</div>
					{%- endif -%}
				</div>
			{% endif %}

			<div class="newsletter-form__wrapper">
				{% form 'customer', class: 'newsletter-form' %}
					<div
						class="
							newsletter-form__inner {% if section.settings.heading == blank
							and section.settings.newsletter_text == blank %}
												margin-auto
											{% endif %}
						"
					>
						<input type="hidden" name="contact[tags]" value="newsletter">
						<div class="newsletter-form__field-wrapper">
							<div class="field">
								<input
									id="NewsletterForm--{{ section.id }}"
									type="email"
									dir="ltr"
									name="contact[email]"
									class="field__input field"
									value="{{ form.email }}"
									aria-required="true"
									autocorrect="off"
									autocapitalize="off"
									autocomplete="email"
									pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$"
									{% if form.errors %}
										autofocus
										aria-invalid="true"
										aria-describedby="Newsletter-error--{{ section.id }}"
									{% elsif form.posted_successfully? %}
										aria-describedby="Newsletter-success--{{ section.id }}"
									{% endif %}
									placeholder="{{ 'newsletter.placeholder' | t }}"
									required
								>
								<label
									class="visually-hidden"
									for="NewsletterForm--{{ section.id }}"
								>
									{{ 'newsletter.label' | t }}
								</label>
							</div>
						</div>
						<button
							type="submit"
							aria-label="Button submit"
							class="
								newsletter__button button button--{{ section.settings.section_button_style }} 	{% if section.settings.button_dot %}
									dot_active
								{% endif %}
							"
							name="commit"
						>
							{{ 'newsletter.button_label' | t }}
						</button>
					</div>

					{%- if form.errors -%}
						<small
							class="newsletter-form__message form__message  "
							id="Newsletter-error--{{ section.id }}"
						>
							{%- render 'icon-error' -%}
							{{- form.errors.translated_fields.email | capitalize }}
							{{ form.errors.messages.email -}}
						</small>
					{%- endif -%}
					{%- if form.posted_successfully? -%}
						<h3
							class="newsletter-form__message newsletter-form__message--success form__message"
							id="Newsletter-success--{{ section.id }}"
							tabindex="-1"
							autofocus
						>
							{% render 'icon-success' -%}
							{{- 'newsletter.success' | t }}
						</h3>
					{%- endif -%}
				{% endform %}
			</div>
		</div>
	</div>
</div>

{% schema %}
{
	"name": "t:sections.newsletter.name",
	"tag": "section",
	"class": "spaced-section",
	"enabled_on": {
		"templates": ["*"]
	},
	"settings": [
		{
			"type": "paragraph",
			"content": "t:sections.newsletter.settings.paragraph.content"
		},
		{
			"type": "color_scheme",
			"id": "color_scheme",
			"default": "background-1",
			"label": "t:sections.all.color_scheme.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.content_options.header.content"
		},
		{
			"type": "select",
			"id": "v_align",
			"default": "column",
			"label": "t:sections.newsletter.settings.vertical_align.label",
			"options": [
				{
					"value": "column",
					"label": "t:sections.newsletter.settings.vertical_align.options.vertical.label"
				},
				{
					"value": "row",
					"label": "t:sections.newsletter.settings.vertical_align.options.horizontal.label"
				}
			]
		},
		{
			"type": "inline_richtext",
			"id": "heading",
			"default": "t:sections.newsletter.settings.heading.default",
			"label": "t:sections.newsletter.settings.heading.label"
		},
		{
			"type": "select",
			"id": "section_heading_tag",
			"label": "t:sections.all.heading.tag",
			"options": [
				{
					"value": "h1",
					"label": "H1"
				},
				{
					"value": "h2",
					"label": "H2"
				},
				{
					"value": "h3",
					"label": "H3"
				},
				{
					"value": "h4",
					"label": "H4"
				},
				{
					"value": "h5",
					"label": "H5"
				},
				{
					"value": "h6",
					"label": "H6"
				},
				{
					"value": "div",
					"label": "div"
				},
				{
					"value": "p",
					"label": "p"
				},
				{
					"value": "span",
					"label": "span"
				}
			],
			"default": "h2"
		},
		{
			"type": "select",
			"id": "heading_size",
			"options": [
				{
					"value": "h4",
					"label": "t:sections.all.heading_size.options__4.label"
				},
				{
					"value": "h3",
					"label": "t:sections.all.heading_size.options__1.label"
				},
				{
					"value": "h2",
					"label": "t:sections.all.heading_size.options__2.label"
				},
				{
					"value": "h1",
					"label": "t:sections.all.heading_size.options__3.label"
				}
			],
			"default": "h1",
			"label": "t:sections.all.heading_size.label"
		},
		{
			"type": "inline_richtext",
			"id": "newsletter_text",
			"default": "t:sections.newsletter.settings.newsletter_text.default",
			"label": "t:sections.newsletter.settings.newsletter_text.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.button.header_button.content"
		},
		{
			"type": "select",
			"id": "section_button_style",
			"options": [
				{
					"value": "primary",
					"label": "t:sections.all.button.button_style.options__1.label"
				},
				{
					"value": "secondary",
					"label": "t:sections.all.button.button_style.options__2.label"
				},
				{
					"value": "tertiary",
					"label": "t:sections.all.button.button_style.options__3.label"
				}
			],
			"default": "primary",
			"label": "t:sections.all.button.button_style.label"
		},
		{
			"type": "checkbox",
			"id": "button_dot",
			"default": true,
			"label": "t:sections.all.button.button_dot.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.section-margin.header.content"
		},
		{
			"type": "select",
			"id": "margin_top",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "no-indent",
			"label": "t:sections.all.section-margin.margin_top.label"
		},
		{
			"type": "select",
			"id": "margin_bottom",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-margin.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-margin.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-margin.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-margin.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-margin.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-margin.options__6.label"
				}
			],
			"default": "no-indent",
			"label": "t:sections.all.section-margin.margin_bottom.label"
		},
		{
			"type": "header",
			"content": "t:sections.all.section-padding.header.content"
		},
		{
			"type": "select",
			"id": "padding_top",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-padding.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-padding.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-padding.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-padding.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-padding.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-padding.options__6.label"
				}
			],
			"default": "m",
			"label": "t:sections.all.section-padding.padding_top.label"
		},
		{
			"type": "select",
			"id": "padding_bottom",
			"options": [
				{
					"value": "no-indent",
					"label": "t:sections.all.section-padding.options__1.label"
				},
				{
					"value": "xs",
					"label": "t:sections.all.section-padding.options__2.label"
				},
				{
					"value": "s",
					"label": "t:sections.all.section-padding.options__3.label"
				},
				{
					"value": "m",
					"label": "t:sections.all.section-padding.options__4.label"
				},
				{
					"value": "l",
					"label": "t:sections.all.section-padding.options__5.label"
				},
				{
					"value": "xl",
					"label": "t:sections.all.section-padding.options__6.label"
				}
			],
			"default": "m",
			"label": "t:sections.all.section-padding.padding_bottom.label"
		}
	],
	"presets": [
		{
			"name": "t:sections.newsletter.name"
		}
	]
}
{% endschema %}
